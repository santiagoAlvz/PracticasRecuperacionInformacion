<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Thu Sep 21 21:58:26 PDT 2023 -->
<title>MMapDirectory (Lucene 9.8.0 core API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-09-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MMapDirectory (Lucene 9.8.0 core API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":42,"i2":42,"i3":10,"i4":42,"i5":10,"i6":42};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MMapDirectory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.store</a></div>
<h2 title="Class MMapDirectory" class="title">Class MMapDirectory</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="Directory.html" title="class in org.apache.lucene.store">org.apache.lucene.store.Directory</a></li>
<li>
<ul class="inheritance">
<li><a href="BaseDirectory.html" title="class in org.apache.lucene.store">org.apache.lucene.store.BaseDirectory</a></li>
<li>
<ul class="inheritance">
<li><a href="FSDirectory.html" title="class in org.apache.lucene.store">org.apache.lucene.store.FSDirectory</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.store.MMapDirectory</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Closeable.html?is-external=true" title="class or interface in java.io" class="externalLink">Closeable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">MMapDirectory</span>
extends <a href="FSDirectory.html" title="class in org.apache.lucene.store">FSDirectory</a></pre>
<div class="block">File-based <a href="Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a> implementation that uses mmap for reading, and <code>FSDirectory.FSIndexOutput</code> for writing.

 <p><b>NOTE</b>: memory mapping uses up a portion of the virtual memory address space in your
 process equal to the size of the file being mapped. Before using this class, be sure your have
 plenty of virtual address space, e.g. by using a 64 bit JRE, or a 32 bit JRE with indexes that
 are guaranteed to fit within the address space. On 32 bit platforms also consult <a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory,long)"><code>MMapDirectory(Path, LockFactory, long)</code></a> if you have problems with mmap failing because of
 fragmented address space. If you get an OutOfMemoryException, it is recommended to reduce the
 chunk size, until it works.

 <p>This class supports preloading files into physical memory upon opening. This can help improve
 performance of searches on a cold page cache at the expense of slowing down opening an index. See
 <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> for more details.

 <p>Due to <a href="https://bugs.openjdk.org/browse/JDK-4724038">this bug</a> in OpenJDK,
 MMapDirectory's <a href="IndexInput.html#close()"><code>IndexInput.close()</code></a> is unable to close the underlying OS file handle. Only
 when GC finally collects the underlying objects, which could be quite some time later, will the
 file handle be closed.

 <p>This will consume additional transient disk usage: on Windows, attempts to delete or overwrite
 the files will result in an exception; on other platforms, which typically have a &quot;delete on
 last close&quot; semantics, while such operations will succeed, the bytes are still consuming
 space on disk. For many applications this limitation is not a problem (e.g. if you have plenty of
 disk space, and you don't rely on overwriting files on Windows) but it's still an important
 limitation to be aware of.

 <p>This class supplies the workaround mentioned in the bug report, which may fail on
 non-Oracle/OpenJDK JVMs. It forcefully unmaps the buffer on close by using an undocumented
 internal cleanup functionality. If <a href="#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a> is <code>true</code>, the workaround
 will be automatically enabled (with no guarantees; if you discover any problems, you can disable
 it by using system property <a href="#ENABLE_UNMAP_HACK_SYSPROP"><code>ENABLE_UNMAP_HACK_SYSPROP</code></a>).

 <p>For the hack to work correct, the following requirements need to be fulfilled: The used JVM
 must be at least Oracle Java / OpenJDK. In addition, the following permissions need to be granted
 to <code>lucene-core.jar</code> in your <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html">policy
 file</a>:

 <ul>
   <li><code>permission java.lang.reflect.ReflectPermission "suppressAccessChecks";</code>
   <li><code>permission java.lang.RuntimePermission "accessClassInPackage.sun.misc";</code>
 </ul>

 <p>On exactly <b>Java 19 / 20 / 21</b> this class will use the modern <code>MemorySegment</code> API
 which allows to safely unmap (if you discover any problems with this preview API, you can disable
 it by using system property <a href="#ENABLE_MEMORY_SEGMENTS_SYSPROP"><code>ENABLE_MEMORY_SEGMENTS_SYSPROP</code></a>).

 <p><b>NOTE:</b> Accessing this class either directly or indirectly from a thread while it's
 interrupted can close the underlying channel immediately if at the same time the thread is
 blocked on IO. The channel will remain closed and subsequent access to <a href="MMapDirectory.html" title="class in org.apache.lucene.store"><code>MMapDirectory</code></a> will
 throw a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels" class="externalLink"><code>ClosedChannelException</code></a>. If your application uses either <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang" class="externalLink"><code>Thread.interrupt()</code></a> or <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Future.html?is-external=true#cancel(boolean)" title="class or interface in java.util.concurrent" class="externalLink"><code>Future.cancel(boolean)</code></a> you should use the legacy <code>
 RAFDirectory</code> from the Lucene <code>misc</code> module in favor of <a href="MMapDirectory.html" title="class in org.apache.lucene.store"><code>MMapDirectory</code></a>.

 <p><b>NOTE:</b> If your application requires external synchronization, you should <b>not</b>
 synchronize on the <code>MMapDirectory</code> instance as this may cause deadlock; use your own
 (non-Lucene) objects instead.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html">Blog post
     about MMapDirectory</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ALL_FILES">ALL_FILES</a></span></code></th>
<td class="colLast">
<div class="block">Argument for <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> that configures all files to be preloaded upon
 opening them.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#BASED_ON_LOAD_IO_CONTEXT">BASED_ON_LOAD_IO_CONTEXT</a></span></code></th>
<td class="colLast">
<div class="block">Argument for <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> that configures files to be preloaded upon
 opening them if they use the <a href="IOContext.html#LOAD"><code>IOContext.LOAD</code></a> I/O context.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_MAX_CHUNK_SIZE">DEFAULT_MAX_CHUNK_SIZE</a></span></code></th>
<td class="colLast">
<div class="block">Default max chunk size:

 
   16 GiBytes for 64 bit <b>Java 19 / 20 / 21</b> JVMs
   1 GiBytes for other 64 bit JVMs
   256 MiBytes for 32 bit JVMs
 </div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ENABLE_MEMORY_SEGMENTS_SYSPROP">ENABLE_MEMORY_SEGMENTS_SYSPROP</a></span></code></th>
<td class="colLast">
<div class="block">This sysprop allows to control if <code>MemorySegment</code> API should be used on supported Java
 versions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ENABLE_UNMAP_HACK_SYSPROP">ENABLE_UNMAP_HACK_SYSPROP</a></span></code></th>
<td class="colLast">
<div class="block">This sysprop allows to control the workaround/hack for unmapping the buffers from address space
 after closing <a href="IndexInput.html" title="class in org.apache.lucene.store"><code>IndexInput</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NO_FILES">NO_FILES</a></span></code></th>
<td class="colLast">
<div class="block">Argument for <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> that configures no files to be preloaded upon
 opening them.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#UNMAP_NOT_SUPPORTED_REASON">UNMAP_NOT_SUPPORTED_REASON</a></span></code></th>
<td class="colLast">
<div class="block">if <a href="#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a> is <code>false</code>, this contains the reason why unmapping is not
 supported.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#UNMAP_SUPPORTED">UNMAP_SUPPORTED</a></span></code></th>
<td class="colLast">
<div class="block"><code>true</code>, if this platform supports unmapping mmapped files.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.org.apache.lucene.store.FSDirectory">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.lucene.store.<a href="FSDirectory.html" title="class in org.apache.lucene.store">FSDirectory</a></h3>
<code><a href="FSDirectory.html#directory">directory</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.org.apache.lucene.store.BaseDirectory">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.lucene.store.<a href="BaseDirectory.html" title="class in org.apache.lucene.store">BaseDirectory</a></h3>
<code><a href="BaseDirectory.html#isOpen">isOpen</a>, <a href="BaseDirectory.html#lockFactory">lockFactory</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path)">MMapDirectory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path)</code></th>
<td class="colLast">
<div class="block">Create a new MMapDirectory for the named location and <a href="FSLockFactory.html#getDefault()"><code>FSLockFactory.getDefault()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,int)">MMapDirectory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
             int&nbsp;maxChunkSize)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="#%3Cinit%3E(java.nio.file.Path,long)"><code>MMapDirectory(Path, long)</code></a> instead.</div>
</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,long)">MMapDirectory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
             long&nbsp;maxChunkSize)</code></th>
<td class="colLast">
<div class="block">Create a new MMapDirectory for the named location and <a href="FSLockFactory.html#getDefault()"><code>FSLockFactory.getDefault()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory)">MMapDirectory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
             <a href="LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory)</code></th>
<td class="colLast">
<div class="block">Create a new MMapDirectory for the named location.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory,int)">MMapDirectory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
             <a href="LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory,
             int&nbsp;maxChunkSize)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory,long)"><code>MMapDirectory(Path, LockFactory, long)</code></a> instead.</div>
</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory,long)">MMapDirectory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
             <a href="LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory,
             long&nbsp;maxChunkSize)</code></th>
<td class="colLast">
<div class="block">Create a new MMapDirectory for the named location, specifying the maximum chunk size used for
 memory mapping.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxChunkSize()">getMaxChunkSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current mmap chunk size.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPreload()">getPreload</a></span>()</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">This information is no longer reliable now that preloading is more granularly
     configured via a predicate.</div>
</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUseUnmap()">getUseUnmap</a></span>()</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a></div>
</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="IndexInput.html" title="class in org.apache.lucene.store">IndexInput</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#openInput(java.lang.String,org.apache.lucene.store.IOContext)">openInput</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name,
         <a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Creates an IndexInput for the file with the given name.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPreload(boolean)">setPreload</a></span>&#8203;(boolean&nbsp;preload)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> instead which provides more granular control.</div>
</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPreload(java.util.function.BiPredicate)">setPreload</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt;&nbsp;preload)</code></th>
<td class="colLast">
<div class="block">Configure which files to preload in physical memory upon opening.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setUseUnmap(boolean)">setUseUnmap</a></span>&#8203;(boolean&nbsp;useUnmapHack)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated, for removal: This API element is subject to removal in a future version.</span>
<div class="deprecationComment">Please use new system property <a href="#ENABLE_UNMAP_HACK_SYSPROP"><code>ENABLE_UNMAP_HACK_SYSPROP</code></a> instead</div>
</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.lucene.store.FSDirectory">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.store.<a href="FSDirectory.html" title="class in org.apache.lucene.store">FSDirectory</a></h3>
<code><a href="FSDirectory.html#close()">close</a>, <a href="FSDirectory.html#createOutput(java.lang.String,org.apache.lucene.store.IOContext)">createOutput</a>, <a href="FSDirectory.html#createTempOutput(java.lang.String,java.lang.String,org.apache.lucene.store.IOContext)">createTempOutput</a>, <a href="FSDirectory.html#deleteFile(java.lang.String)">deleteFile</a>, <a href="FSDirectory.html#deletePendingFiles()">deletePendingFiles</a>, <a href="FSDirectory.html#ensureCanRead(java.lang.String)">ensureCanRead</a>, <a href="FSDirectory.html#fileLength(java.lang.String)">fileLength</a>, <a href="FSDirectory.html#fsync(java.lang.String)">fsync</a>, <a href="FSDirectory.html#getDirectory()">getDirectory</a>, <a href="FSDirectory.html#getPendingDeletions()">getPendingDeletions</a>, <a href="FSDirectory.html#listAll()">listAll</a>, <a href="FSDirectory.html#listAll(java.nio.file.Path)">listAll</a>, <a href="FSDirectory.html#open(java.nio.file.Path)">open</a>, <a href="FSDirectory.html#open(java.nio.file.Path,org.apache.lucene.store.LockFactory)">open</a>, <a href="FSDirectory.html#rename(java.lang.String,java.lang.String)">rename</a>, <a href="FSDirectory.html#sync(java.util.Collection)">sync</a>, <a href="FSDirectory.html#syncMetaData()">syncMetaData</a>, <a href="FSDirectory.html#toString()">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.lucene.store.BaseDirectory">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.store.<a href="BaseDirectory.html" title="class in org.apache.lucene.store">BaseDirectory</a></h3>
<code><a href="BaseDirectory.html#ensureOpen()">ensureOpen</a>, <a href="BaseDirectory.html#obtainLock(java.lang.String)">obtainLock</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.lucene.store.Directory">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.store.<a href="Directory.html" title="class in org.apache.lucene.store">Directory</a></h3>
<code><a href="Directory.html#copyFrom(org.apache.lucene.store.Directory,java.lang.String,java.lang.String,org.apache.lucene.store.IOContext)">copyFrom</a>, <a href="Directory.html#getTempFileName(java.lang.String,java.lang.String,long)">getTempFileName</a>, <a href="Directory.html#openChecksumInput(java.lang.String,org.apache.lucene.store.IOContext)">openChecksumInput</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="ALL_FILES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ALL_FILES</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt; ALL_FILES</pre>
<div class="block">Argument for <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> that configures all files to be preloaded upon
 opening them.</div>
</li>
</ul>
<a id="NO_FILES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_FILES</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt; NO_FILES</pre>
<div class="block">Argument for <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> that configures no files to be preloaded upon
 opening them.</div>
</li>
</ul>
<a id="BASED_ON_LOAD_IO_CONTEXT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BASED_ON_LOAD_IO_CONTEXT</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt; BASED_ON_LOAD_IO_CONTEXT</pre>
<div class="block">Argument for <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> that configures files to be preloaded upon
 opening them if they use the <a href="IOContext.html#LOAD"><code>IOContext.LOAD</code></a> I/O context.</div>
</li>
</ul>
<a id="DEFAULT_MAX_CHUNK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_CHUNK_SIZE</h4>
<pre>public static final&nbsp;long DEFAULT_MAX_CHUNK_SIZE</pre>
<div class="block">Default max chunk size:

 <ul>
   <li>16 GiBytes for 64 bit <b>Java 19 / 20 / 21</b> JVMs
   <li>1 GiBytes for other 64 bit JVMs
   <li>256 MiBytes for 32 bit JVMs
 </ul></div>
</li>
</ul>
<a id="ENABLE_UNMAP_HACK_SYSPROP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ENABLE_UNMAP_HACK_SYSPROP</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> ENABLE_UNMAP_HACK_SYSPROP</pre>
<div class="block">This sysprop allows to control the workaround/hack for unmapping the buffers from address space
 after closing <a href="IndexInput.html" title="class in org.apache.lucene.store"><code>IndexInput</code></a>. By default it is enabled; set to <code>false</code> to disable the
 unmap hack globally. On command line pass <code>
 -Dorg.apache.lucene.store.MMapDirectory.enableUnmapHack=false</code> to disable.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.store.MMapDirectory.ENABLE_UNMAP_HACK_SYSPROP">Constant Field Values</a></dd>
<dt><span class="simpleTagLabel">NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
<a id="ENABLE_MEMORY_SEGMENTS_SYSPROP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ENABLE_MEMORY_SEGMENTS_SYSPROP</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> ENABLE_MEMORY_SEGMENTS_SYSPROP</pre>
<div class="block">This sysprop allows to control if <code>MemorySegment</code> API should be used on supported Java
 versions. By default it is enabled; set to <code>false</code> to use legacy <code>ByteBuffer</code>
 implementation. On command line pass <code>
 -Dorg.apache.lucene.store.MMapDirectory.enableMemorySegments=false</code> to disable.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.store.MMapDirectory.ENABLE_MEMORY_SEGMENTS_SYSPROP">Constant Field Values</a></dd>
<dt><span class="simpleTagLabel">NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
<a id="UNMAP_SUPPORTED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>UNMAP_SUPPORTED</h4>
<pre>public static final&nbsp;boolean UNMAP_SUPPORTED</pre>
<div class="block"><code>true</code>, if this platform supports unmapping mmapped files.</div>
</li>
</ul>
<a id="UNMAP_NOT_SUPPORTED_REASON">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UNMAP_NOT_SUPPORTED_REASON</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> UNMAP_NOT_SUPPORTED_REASON</pre>
<div class="block">if <a href="#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a> is <code>false</code>, this contains the reason why unmapping is not
 supported.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.nio.file.Path,org.apache.lucene.store.LockFactory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
                     <a href="LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location. The directory is created at the named
 location if it does not yet exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dd><code>lockFactory</code> - the lock factory to use</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location and <a href="FSLockFactory.html#getDefault()"><code>FSLockFactory.getDefault()</code></a>. The
 directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
public&nbsp;MMapDirectory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
                     int&nbsp;maxChunkSize)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="#%3Cinit%3E(java.nio.file.Path,long)"><code>MMapDirectory(Path, long)</code></a> instead.</div>
</div>
<div class="block">Create a new MMapDirectory for the named location and <a href="FSLockFactory.html#getDefault()"><code>FSLockFactory.getDefault()</code></a>. The
 directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
                     long&nbsp;maxChunkSize)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location and <a href="FSLockFactory.html#getDefault()"><code>FSLockFactory.getDefault()</code></a>. The
 directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dd><code>maxChunkSize</code> - maximum chunk size (for default see <a href="#DEFAULT_MAX_CHUNK_SIZE"><code>DEFAULT_MAX_CHUNK_SIZE</code></a>) used
     for memory mapping.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path,org.apache.lucene.store.LockFactory,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
public&nbsp;MMapDirectory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
                     <a href="LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory,
                     int&nbsp;maxChunkSize)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory,long)"><code>MMapDirectory(Path, LockFactory, long)</code></a> instead.</div>
</div>
<div class="block">Create a new MMapDirectory for the named location and <a href="FSLockFactory.html#getDefault()"><code>FSLockFactory.getDefault()</code></a>. The
 directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.nio.file.Path,org.apache.lucene.store.LockFactory,long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file" class="externalLink">Path</a>&nbsp;path,
                     <a href="LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory,
                     long&nbsp;maxChunkSize)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location, specifying the maximum chunk size used for
 memory mapping. The directory is created at the named location if it does not yet exist.

 <p>Especially on 32 bit platform, the address space can be very fragmented, so large index
 files cannot be mapped. Using a lower chunk size makes the directory implementation a little
 bit slower (as the correct chunk may be resolved on lots of seeks) but the chance is higher
 that mmap does not fail. On 64 bit Java platforms, this parameter should always be large (like
 1 GiBytes, or even larger with recent Java versions), as the address space is big enough. If it
 is larger, fragmentation of address space increases, but number of file handles and mappings is
 lower for huge installations with many open indexes.

 <p><b>Please note:</b> The chunk size is always rounded down to a power of 2.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dd><code>lockFactory</code> - the lock factory to use, or null for the default (<a href="NativeFSLockFactory.html" title="class in org.apache.lucene.store"><code>NativeFSLockFactory</code></a>);</dd>
<dd><code>maxChunkSize</code> - maximum chunk size (for default see <a href="#DEFAULT_MAX_CHUNK_SIZE"><code>DEFAULT_MAX_CHUNK_SIZE</code></a>) used
     for memory mapping.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setUseUnmap(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUseUnmap</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true#forRemoval()" title="class or interface in java.lang" class="externalLink">forRemoval</a>=true)
public&nbsp;void&nbsp;setUseUnmap&#8203;(boolean&nbsp;useUnmapHack)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated, for removal: This API element is subject to removal in a future version.</span>
<div class="deprecationComment">Please use new system property <a href="#ENABLE_UNMAP_HACK_SYSPROP"><code>ENABLE_UNMAP_HACK_SYSPROP</code></a> instead</div>
</div>
<div class="block">This method is retired, see deprecation notice!</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang" class="externalLink">UnsupportedOperationException</a></code> - as setting cannot be changed</dd>
</dl>
</li>
</ul>
<a id="getUseUnmap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUseUnmap</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
public&nbsp;boolean&nbsp;getUseUnmap()</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a></div>
</div>
<div class="block">Returns <code>true</code>, if the unmap workaround is enabled.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setUseUnmap(boolean)"><code>setUseUnmap(boolean)</code></a></dd>
</dl>
</li>
</ul>
<a id="setPreload(java.util.function.BiPredicate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPreload</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setPreload&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink">BiPredicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&gt;&nbsp;preload)</pre>
<div class="block">Configure which files to preload in physical memory upon opening. The default implementation
 does not preload anything. The behavior is best effort and operating system-dependent.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>preload</code> - a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiPredicate.html?is-external=true" title="class or interface in java.util.function" class="externalLink"><code>BiPredicate</code></a> whose first argument is the file name, and second argument
     is the <a href="IOContext.html" title="class in org.apache.lucene.store"><code>IOContext</code></a> used to open the file</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#ALL_FILES"><code>ALL_FILES</code></a>, 
<a href="#NO_FILES"><code>NO_FILES</code></a></dd>
</dl>
</li>
</ul>
<a id="setPreload(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPreload</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
public&nbsp;void&nbsp;setPreload&#8203;(boolean&nbsp;preload)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a> instead which provides more granular control.</div>
</div>
<div class="block">Configure whether to preload files on this <a href="MMapDirectory.html" title="class in org.apache.lucene.store"><code>MMapDirectory</code></a> into physical memory upon
 opening. The behavior is best effort and operating system-dependent.</div>
</li>
</ul>
<a id="getPreload()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPreload</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
public&nbsp;boolean&nbsp;getPreload()</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">This information is no longer reliable now that preloading is more granularly
     configured via a predicate.</div>
</div>
<div class="block">Return whether files are loaded into physical memory upon opening.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setPreload(java.util.function.BiPredicate)"><code>setPreload(BiPredicate)</code></a></dd>
</dl>
</li>
</ul>
<a id="getMaxChunkSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxChunkSize</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;getMaxChunkSize()</pre>
<div class="block">Returns the current mmap chunk size.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#%3Cinit%3E(java.nio.file.Path,org.apache.lucene.store.LockFactory,long)"><code>MMapDirectory(Path, LockFactory, long)</code></a></dd>
</dl>
</li>
</ul>
<a id="openInput(java.lang.String,org.apache.lucene.store.IOContext)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>openInput</h4>
<pre class="methodSignature">public&nbsp;<a href="IndexInput.html" title="class in org.apache.lucene.store">IndexInput</a>&nbsp;openInput&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name,
                            <a href="IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&nbsp;context)
                     throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Creates an IndexInput for the file with the given name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="Directory.html#openInput(java.lang.String,org.apache.lucene.store.IOContext)">openInput</a></code>&nbsp;in class&nbsp;<code><a href="Directory.html" title="class in org.apache.lucene.store">Directory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - the name of an existing file.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - in case of I/O error</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MMapDirectory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><i>Copyright &copy; 2000-2023 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</body>
</html>
