<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Thu Sep 21 21:58:26 PDT 2023 -->
<title>MergePolicy (Lucene 9.8.0 core API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-09-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MergePolicy (Lucene 9.8.0 core API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":6,"i2":6,"i3":10,"i4":10,"i5":6,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MergePolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.index</a></div>
<h2 title="Class MergePolicy" class="title">Class MergePolicy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.index.MergePolicy</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="FilterMergePolicy.html" title="class in org.apache.lucene.index">FilterMergePolicy</a></code>, <code><a href="LogMergePolicy.html" title="class in org.apache.lucene.index">LogMergePolicy</a></code>, <code><a href="NoMergePolicy.html" title="class in org.apache.lucene.index">NoMergePolicy</a></code>, <code><a href="TieredMergePolicy.html" title="class in org.apache.lucene.index">TieredMergePolicy</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">MergePolicy</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Expert: a MergePolicy determines the sequence of primitive merge operations.

 <p>Whenever the segments in an index have been altered by <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a>, either the
 addition of a newly flushed segment, addition of many segments from addIndexes* calls, or a
 previous merge that may now need to cascade, <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> invokes <a href="#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>findMerges(org.apache.lucene.index.MergeTrigger, org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.MergePolicy.MergeContext)</code></a> to
 give the MergePolicy a chance to pick merges that are now required. This method returns a <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index"><code>MergePolicy.MergeSpecification</code></a> instance describing the set of merges that should be done, or null if no
 merges are necessary. When IndexWriter.forceMerge is called, it calls <a href="#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)"><code>findForcedMerges(SegmentInfos, int, Map, MergeContext)</code></a> and the MergePolicy should then return
 the necessary merges.

 <p>Note that the policy can return more than one merge at a time. In this case, if the writer is
 using <a href="SerialMergeScheduler.html" title="class in org.apache.lucene.index"><code>SerialMergeScheduler</code></a>, the merges will be run sequentially but if it is using <a href="ConcurrentMergeScheduler.html" title="class in org.apache.lucene.index"><code>ConcurrentMergeScheduler</code></a> they will be run concurrently.

 <p>The default MergePolicy is <a href="TieredMergePolicy.html" title="class in org.apache.lucene.index"><code>TieredMergePolicy</code></a>.</div>
<dl>
<dt><span class="simpleTagLabel">WARNING: This API is experimental and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MergePolicy.MergeAbortedException.html" title="class in org.apache.lucene.index">MergePolicy.MergeAbortedException</a></span></code></th>
<td class="colLast">
<div class="block">Thrown when a merge was explicitly aborted because <a href="IndexWriter.html#abortMerges()"><code>IndexWriter.abortMerges()</code></a> was called.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a></span></code></th>
<td class="colLast">
<div class="block">This interface represents the current context of the merge selection process.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MergePolicy.MergeException.html" title="class in org.apache.lucene.index">MergePolicy.MergeException</a></span></code></th>
<td class="colLast">
<div class="block">Exception thrown if there are any problems while executing a merge.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></span></code></th>
<td class="colLast">
<div class="block">A MergeSpecification instance provides the information necessary to perform multiple merges.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a></span></code></th>
<td class="colLast">
<div class="block">OneMerge provides the information necessary to perform an individual primitive merge operation,
 resulting in a single new segment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MergePolicy.OneMergeProgress.html" title="class in org.apache.lucene.index">MergePolicy.OneMergeProgress</a></span></code></th>
<td class="colLast">
<div class="block">Progress and state for an executing merge.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_MAX_CFS_SEGMENT_SIZE">DEFAULT_MAX_CFS_SEGMENT_SIZE</a></span></code></th>
<td class="colLast">
<div class="block">Default max segment size in order to use compound file system.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_NO_CFS_RATIO">DEFAULT_NO_CFS_RATIO</a></span></code></th>
<td class="colLast">
<div class="block">Default ratio for compound file system usage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maxCFSSegmentSize">maxCFSSegmentSize</a></span></code></th>
<td class="colLast">
<div class="block">If the size of the merged segment exceeds this value then it will not use compound file format.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#noCFSRatio">noCFSRatio</a></span></code></th>
<td class="colLast">
<div class="block">If the size of the merge segment exceeds this ratio of the total index size then it will remain
 in non-compound format</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">MergePolicy</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a new merge policy instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(double,long)">MergePolicy</a></span>&#8203;(double&nbsp;defaultNoCFSRatio,
           long&nbsp;defaultMaxCFSSegmentSize)</code></th>
<td class="colLast">
<div class="block">Creates a new merge policy instance with default settings for noCFSRatio and maxCFSSegmentSize.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#assertDelCount(int,org.apache.lucene.index.SegmentCommitInfo)">assertDelCount</a></span>&#8203;(int&nbsp;delCount,
              <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info)</code></th>
<td class="colLast">
<div class="block">Asserts that the delCount for this SegmentCommitInfo is valid</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">findForcedDeletesMerges</a></span>&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                       <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Determine what set of merge operations is necessary in order to expunge all deletes from the
 index.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>abstract <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)">findForcedMerges</a></span>&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                int&nbsp;maxSegmentCount,
                <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang" class="externalLink">Boolean</a>&gt;&nbsp;segmentsToMerge,
                <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Determine what set of merge operations is necessary in order to merge to <code>&lt;=</code> the
 specified segment count.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">findFullFlushMerges</a></span>&#8203;(<a href="MergeTrigger.html" title="enum in org.apache.lucene.index">MergeTrigger</a>&nbsp;mergeTrigger,
                   <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                   <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Identifies merges that we want to execute (synchronously) on commit.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findMerges(org.apache.lucene.index.CodecReader...)">findMerges</a></span>&#8203;(<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>...&nbsp;readers)</code></th>
<td class="colLast">
<div class="block">Define the set of merge operations to perform on provided codec readers in <a href="IndexWriter.html#addIndexes(org.apache.lucene.index.CodecReader...)"><code>IndexWriter.addIndexes(CodecReader...)</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>abstract <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">findMerges</a></span>&#8203;(<a href="MergeTrigger.html" title="enum in org.apache.lucene.index">MergeTrigger</a>&nbsp;mergeTrigger,
          <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
          <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Determine what set of merge operations are now necessary on the index.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxCFSSegmentSizeMB()">getMaxCFSSegmentSizeMB</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the largest size allowed for a compound file segment</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNoCFSRatio()">getNoCFSRatio</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns current <code>noCFSRatio</code>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMerged(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">isMerged</a></span>&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
        <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info,
        <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Returns true if this single info is already fully merged (has no pending deletes, is in the
 same dir as the writer, and matches the current compound file setting</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#keepFullyDeletedSegment(org.apache.lucene.util.IOSupplier)">keepFullyDeletedSegment</a></span>&#8203;(<a href="../util/IOSupplier.html" title="interface in org.apache.lucene.util">IOSupplier</a>&lt;<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>&gt;&nbsp;readerIOSupplier)</code></th>
<td class="colLast">
<div class="block">Returns true if the segment represented by the given CodecReader should be keep even if it's
 fully deleted.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maxFullFlushMergeSize()">maxFullFlushMergeSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the maximum size of segments to be included in full-flush merges by the default
 implementation of <a href="#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>findFullFlushMerges(org.apache.lucene.index.MergeTrigger, org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.MergePolicy.MergeContext)</code></a>.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#message(java.lang.String,org.apache.lucene.index.MergePolicy.MergeContext)">message</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;message,
       <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Print a debug message to <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index"><code>MergePolicy.MergeContext</code></a>'s <code>infoStream</code>.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo,int,org.apache.lucene.util.IOSupplier)">numDeletesToMerge</a></span>&#8203;(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info,
                 int&nbsp;delCount,
                 <a href="../util/IOSupplier.html" title="interface in org.apache.lucene.util">IOSupplier</a>&lt;<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>&gt;&nbsp;readerSupplier)</code></th>
<td class="colLast">
<div class="block">Returns the number of deletes that a merge would claim on the given segment.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#segString(org.apache.lucene.index.MergePolicy.MergeContext,java.lang.Iterable)">segString</a></span>&#8203;(<a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext,
         <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&gt;&nbsp;infos)</code></th>
<td class="colLast">
<div class="block">Builds a String representation of the given SegmentCommitInfo instances</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMaxCFSSegmentSizeMB(double)">setMaxCFSSegmentSizeMB</a></span>&#8203;(double&nbsp;v)</code></th>
<td class="colLast">
<div class="block">If a merged segment will be more than this value, leave the segment as non-compound file even
 if compound file is enabled.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setNoCFSRatio(double)">setNoCFSRatio</a></span>&#8203;(double&nbsp;noCFSRatio)</code></th>
<td class="colLast">
<div class="block">If a merged segment will be more than this percentage of the total size of the index, leave the
 segment as non-compound file even if compound file is enabled.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#size(org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">size</a></span>&#8203;(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info,
    <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Return the byte size of the provided <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index"><code>SegmentCommitInfo</code></a>, pro-rated by percentage of
 non-deleted documents is set.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#useCompoundFile(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">useCompoundFile</a></span>&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
               <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;mergedInfo,
               <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Returns true if a new segment (regardless of its origin) should use the compound file format.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verbose(org.apache.lucene.index.MergePolicy.MergeContext)">verbose</a></span>&#8203;(<a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</code></th>
<td class="colLast">
<div class="block">Returns <code>true</code> if the info-stream is in verbose mode</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="DEFAULT_NO_CFS_RATIO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_NO_CFS_RATIO</h4>
<pre>protected static final&nbsp;double DEFAULT_NO_CFS_RATIO</pre>
<div class="block">Default ratio for compound file system usage. Set to <code>1.0</code>, always use compound file
 system.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.index.MergePolicy.DEFAULT_NO_CFS_RATIO">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DEFAULT_MAX_CFS_SEGMENT_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_CFS_SEGMENT_SIZE</h4>
<pre>protected static final&nbsp;long DEFAULT_MAX_CFS_SEGMENT_SIZE</pre>
<div class="block">Default max segment size in order to use compound file system. Set to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html?is-external=true#MAX_VALUE" title="class or interface in java.lang" class="externalLink"><code>Long.MAX_VALUE</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.index.MergePolicy.DEFAULT_MAX_CFS_SEGMENT_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="noCFSRatio">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noCFSRatio</h4>
<pre>protected&nbsp;double noCFSRatio</pre>
<div class="block">If the size of the merge segment exceeds this ratio of the total index size then it will remain
 in non-compound format</div>
</li>
</ul>
<a id="maxCFSSegmentSize">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>maxCFSSegmentSize</h4>
<pre>protected&nbsp;long maxCFSSegmentSize</pre>
<div class="block">If the size of the merged segment exceeds this value then it will not use compound file format.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MergePolicy</h4>
<pre>protected&nbsp;MergePolicy()</pre>
<div class="block">Creates a new merge policy instance.</div>
</li>
</ul>
<a id="&lt;init&gt;(double,long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MergePolicy</h4>
<pre>protected&nbsp;MergePolicy&#8203;(double&nbsp;defaultNoCFSRatio,
                      long&nbsp;defaultMaxCFSSegmentSize)</pre>
<div class="block">Creates a new merge policy instance with default settings for noCFSRatio and maxCFSSegmentSize.
 This ctor should be used by subclasses using different defaults than the <a href="MergePolicy.html" title="class in org.apache.lucene.index"><code>MergePolicy</code></a></div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findMerges</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findMerges&#8203;(<a href="MergeTrigger.html" title="enum in org.apache.lucene.index">MergeTrigger</a>&nbsp;mergeTrigger,
                                                          <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                                                          <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
                                                   throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Determine what set of merge operations are now necessary on the index. <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a>
 calls this whenever there is a change to the segments. This call is always synchronized on the
 <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instance so only one thread at a time will call this method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mergeTrigger</code> - the event that triggered the merge</dd>
<dd><code>segmentInfos</code> - the total set of segments in the index</dd>
<dd><code>mergeContext</code> - the IndexWriter to find the merges on</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findMerges(org.apache.lucene.index.CodecReader...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findMerges</h4>
<pre class="methodSignature">public&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findMerges&#8203;(<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>...&nbsp;readers)
                                          throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Define the set of merge operations to perform on provided codec readers in <a href="IndexWriter.html#addIndexes(org.apache.lucene.index.CodecReader...)"><code>IndexWriter.addIndexes(CodecReader...)</code></a>.

 <p>The merge operation is required to convert provided readers into segments that can be added
 to the writer. This API can be overridden in custom merge policies to control the concurrency
 for addIndexes. Default implementation creates a single merge operation for all provided
 readers (lowest concurrency). Creating a merge for each reader, would provide the highest level
 of concurrency possible with the configured merge scheduler.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>readers</code> - CodecReader(s) to merge into the main index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findForcedMerges(org.apache.lucene.index.SegmentInfos,int,java.util.Map,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findForcedMerges</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findForcedMerges&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                                                                int&nbsp;maxSegmentCount,
                                                                <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang" class="externalLink">Boolean</a>&gt;&nbsp;segmentsToMerge,
                                                                <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
                                                         throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Determine what set of merge operations is necessary in order to merge to <code>&lt;=</code> the
 specified segment count. <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> calls this when its <a href="IndexWriter.html#forceMerge(int)"><code>IndexWriter.forceMerge(int)</code></a>
 method is called. This call is always synchronized on the <a href="IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> instance so only
 one thread at a time will call this method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>segmentInfos</code> - the total set of segments in the index</dd>
<dd><code>maxSegmentCount</code> - requested maximum number of segments in the index</dd>
<dd><code>segmentsToMerge</code> - contains the specific SegmentInfo instances that must be merged away.
     This may be a subset of all SegmentInfos. If the value is True for a given SegmentInfo,
     that means this segment was an original segment present in the to-be-merged index; else, it
     was a segment produced by a cascaded merge.</dd>
<dd><code>mergeContext</code> - the MergeContext to find the merges on</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findForcedDeletesMerges</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findForcedDeletesMerges&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                                                                       <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
                                                                throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Determine what set of merge operations is necessary in order to expunge all deletes from the
 index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>segmentInfos</code> - the total set of segments in the index</dd>
<dd><code>mergeContext</code> - the MergeContext to find the merges on</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findFullFlushMerges</h4>
<pre class="methodSignature">public&nbsp;<a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">MergePolicy.MergeSpecification</a>&nbsp;findFullFlushMerges&#8203;(<a href="MergeTrigger.html" title="enum in org.apache.lucene.index">MergeTrigger</a>&nbsp;mergeTrigger,
                                                          <a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;segmentInfos,
                                                          <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
                                                   throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Identifies merges that we want to execute (synchronously) on commit. By default, this will
 return <a href="#findMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>natural merges</code></a> whose segments are all less than the <a href="#maxFullFlushMergeSize()"><code>max segment size for full flushes</code></a>.

 <p>Any merges returned here will make <a href="IndexWriter.html#commit()"><code>IndexWriter.commit()</code></a>, <a href="IndexWriter.html#prepareCommit()"><code>IndexWriter.prepareCommit()</code></a> or <a href="IndexWriter.html#getReader(boolean,boolean)"><code>IndexWriter.getReader(boolean, boolean)</code></a> block until the
 merges complete or until <a href="LiveIndexWriterConfig.html#getMaxFullFlushMergeWaitMillis()"><code>LiveIndexWriterConfig.getMaxFullFlushMergeWaitMillis()</code></a> has
 elapsed. This may be used to merge small segments that have just been flushed, reducing the
 number of segments in the point in time snapshot. If a merge does not complete in the allotted
 time, it will continue to execute, and eventually finish and apply to future point in time
 snapshot, but will not be reflected in the current one.

 <p>If a <a href="MergePolicy.OneMerge.html" title="class in org.apache.lucene.index"><code>MergePolicy.OneMerge</code></a> in the returned <a href="MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index"><code>MergePolicy.MergeSpecification</code></a> includes a segment already
 included in a registered merge, then <a href="IndexWriter.html#commit()"><code>IndexWriter.commit()</code></a> or <a href="IndexWriter.html#prepareCommit()"><code>IndexWriter.prepareCommit()</code></a> will throw a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink"><code>IllegalStateException</code></a>. Use <a href="MergePolicy.MergeContext.html#getMergingSegments()"><code>MergePolicy.MergeContext.getMergingSegments()</code></a> to determine which segments are currently registered to
 merge.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mergeTrigger</code> - the event that triggered the merge (COMMIT or GET_READER).</dd>
<dd><code>segmentInfos</code> - the total set of segments in the index (while preparing the commit)</dd>
<dd><code>mergeContext</code> - the MergeContext to find the merges on, which should be used to determine
     which segments are already in a registered merge (see <a href="MergePolicy.MergeContext.html#getMergingSegments()"><code>MergePolicy.MergeContext.getMergingSegments()</code></a>).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="useCompoundFile(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useCompoundFile</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;useCompoundFile&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
                               <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;mergedInfo,
                               <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
                        throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Returns true if a new segment (regardless of its origin) should use the compound file format.
 The default implementation returns <code>true</code> iff the size of the given mergedInfo is
 less or equal to <a href="#getMaxCFSSegmentSizeMB()"><code>getMaxCFSSegmentSizeMB()</code></a> and the size is less or equal to the
 TotalIndexSize * <a href="#getNoCFSRatio()"><code>getNoCFSRatio()</code></a> otherwise <code>false</code>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="size(org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre class="methodSignature">protected&nbsp;long&nbsp;size&#8203;(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info,
                    <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
             throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Return the byte size of the provided <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index"><code>SegmentCommitInfo</code></a>, pro-rated by percentage of
 non-deleted documents is set.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="maxFullFlushMergeSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxFullFlushMergeSize</h4>
<pre class="methodSignature">protected&nbsp;long&nbsp;maxFullFlushMergeSize()</pre>
<div class="block">Return the maximum size of segments to be included in full-flush merges by the default
 implementation of <a href="#findFullFlushMerges(org.apache.lucene.index.MergeTrigger,org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.MergePolicy.MergeContext)"><code>findFullFlushMerges(org.apache.lucene.index.MergeTrigger, org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.MergePolicy.MergeContext)</code></a>.</div>
</li>
</ul>
<a id="assertDelCount(int,org.apache.lucene.index.SegmentCommitInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertDelCount</h4>
<pre class="methodSignature">protected final&nbsp;boolean&nbsp;assertDelCount&#8203;(int&nbsp;delCount,
                                       <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info)</pre>
<div class="block">Asserts that the delCount for this SegmentCommitInfo is valid</div>
</li>
</ul>
<a id="isMerged(org.apache.lucene.index.SegmentInfos,org.apache.lucene.index.SegmentCommitInfo,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMerged</h4>
<pre class="methodSignature">protected final&nbsp;boolean&nbsp;isMerged&#8203;(<a href="SegmentInfos.html" title="class in org.apache.lucene.index">SegmentInfos</a>&nbsp;infos,
                                 <a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info,
                                 <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)
                          throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Returns true if this single info is already fully merged (has no pending deletes, is in the
 same dir as the writer, and matches the current compound file setting</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="getNoCFSRatio()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNoCFSRatio</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getNoCFSRatio()</pre>
<div class="block">Returns current <code>noCFSRatio</code>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setNoCFSRatio(double)"><code>setNoCFSRatio(double)</code></a></dd>
</dl>
</li>
</ul>
<a id="setNoCFSRatio(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNoCFSRatio</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setNoCFSRatio&#8203;(double&nbsp;noCFSRatio)</pre>
<div class="block">If a merged segment will be more than this percentage of the total size of the index, leave the
 segment as non-compound file even if compound file is enabled. Set to 1.0 to always use CFS
 regardless of merge size.</div>
</li>
</ul>
<a id="getMaxCFSSegmentSizeMB()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxCFSSegmentSizeMB</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getMaxCFSSegmentSizeMB()</pre>
<div class="block">Returns the largest size allowed for a compound file segment</div>
</li>
</ul>
<a id="setMaxCFSSegmentSizeMB(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxCFSSegmentSizeMB</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setMaxCFSSegmentSizeMB&#8203;(double&nbsp;v)</pre>
<div class="block">If a merged segment will be more than this value, leave the segment as non-compound file even
 if compound file is enabled. Set this to Double.POSITIVE_INFINITY (default) and noCFSRatio to
 1.0 to always use CFS regardless of merge size.</div>
</li>
</ul>
<a id="keepFullyDeletedSegment(org.apache.lucene.util.IOSupplier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keepFullyDeletedSegment</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;keepFullyDeletedSegment&#8203;(<a href="../util/IOSupplier.html" title="interface in org.apache.lucene.util">IOSupplier</a>&lt;<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>&gt;&nbsp;readerIOSupplier)
                                throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Returns true if the segment represented by the given CodecReader should be keep even if it's
 fully deleted. This is useful for testing of for instance if the merge policy implements
 retention policies for soft deletes.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="numDeletesToMerge(org.apache.lucene.index.SegmentCommitInfo,int,org.apache.lucene.util.IOSupplier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numDeletesToMerge</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;numDeletesToMerge&#8203;(<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&nbsp;info,
                             int&nbsp;delCount,
                             <a href="../util/IOSupplier.html" title="interface in org.apache.lucene.util">IOSupplier</a>&lt;<a href="CodecReader.html" title="class in org.apache.lucene.index">CodecReader</a>&gt;&nbsp;readerSupplier)
                      throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Returns the number of deletes that a merge would claim on the given segment. This method will
 by default return the sum of the del count on disk and the pending delete count. Yet,
 subclasses that wrap merge readers might modify this to reflect deletes that are carried over
 to the target segment in the case of soft deletes.

 <p>Soft deletes all deletes to survive across merges in order to control when the soft-deleted
 data is claimed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>info</code> - the segment info that identifies the segment</dd>
<dd><code>delCount</code> - the number deleted documents for this segment</dd>
<dd><code>readerSupplier</code> - a supplier that allows to obtain a <a href="CodecReader.html" title="class in org.apache.lucene.index"><code>CodecReader</code></a> for this segment</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="IndexWriter.html#softUpdateDocument(org.apache.lucene.index.Term,java.lang.Iterable,org.apache.lucene.document.Field...)"><code>IndexWriter.softUpdateDocument(Term, Iterable, Field...)</code></a>, 
<a href="IndexWriterConfig.html#setSoftDeletesField(java.lang.String)"><code>IndexWriterConfig.setSoftDeletesField(String)</code></a></dd>
</dl>
</li>
</ul>
<a id="segString(org.apache.lucene.index.MergePolicy.MergeContext,java.lang.Iterable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>segString</h4>
<pre class="methodSignature">protected final&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;segString&#8203;(<a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext,
                                 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;<a href="SegmentCommitInfo.html" title="class in org.apache.lucene.index">SegmentCommitInfo</a>&gt;&nbsp;infos)</pre>
<div class="block">Builds a String representation of the given SegmentCommitInfo instances</div>
</li>
</ul>
<a id="message(java.lang.String,org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>message</h4>
<pre class="methodSignature">protected final&nbsp;void&nbsp;message&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;message,
                             <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</pre>
<div class="block">Print a debug message to <a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index"><code>MergePolicy.MergeContext</code></a>'s <code>infoStream</code>.</div>
</li>
</ul>
<a id="verbose(org.apache.lucene.index.MergePolicy.MergeContext)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>verbose</h4>
<pre class="methodSignature">protected final&nbsp;boolean&nbsp;verbose&#8203;(<a href="MergePolicy.MergeContext.html" title="interface in org.apache.lucene.index">MergePolicy.MergeContext</a>&nbsp;mergeContext)</pre>
<div class="block">Returns <code>true</code> if the info-stream is in verbose mode</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#message(java.lang.String,org.apache.lucene.index.MergePolicy.MergeContext)"><code>message(String, MergeContext)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MergePolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><i>Copyright &copy; 2000-2023 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</body>
</html>
