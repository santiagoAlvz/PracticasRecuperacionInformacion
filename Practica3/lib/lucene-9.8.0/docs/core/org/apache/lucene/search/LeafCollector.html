<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Thu Sep 21 21:58:26 PDT 2023 -->
<title>LeafCollector (Lucene 9.8.0 core API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-09-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LeafCollector (Lucene 9.8.0 core API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":18,"i2":18,"i3":18,"i4":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LeafCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.lucene.search</a></div>
<h2 title="Interface LeafCollector" class="title">Interface LeafCollector</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="FilterLeafCollector.html" title="class in org.apache.lucene.search">FilterLeafCollector</a></code>, <code><a href="SimpleCollector.html" title="class in org.apache.lucene.search">SimpleCollector</a></code>, <code><a href="TopScoreDocCollector.ScorerLeafCollector.html" title="class in org.apache.lucene.search">TopScoreDocCollector.ScorerLeafCollector</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">LeafCollector</span></pre>
<div class="block">Collector decouples the score from the collected doc: the score computation is skipped entirely
 if it's not needed. Collectors that do need the score should implement the <a href="#setScorer(org.apache.lucene.search.Scorable)"><code>setScorer(org.apache.lucene.search.Scorable)</code></a>
 method, to hold onto the passed <a href="Scorer.html" title="class in org.apache.lucene.search"><code>Scorer</code></a> instance, and call <a href="Scorable.html#score()"><code>Scorable.score()</code></a> within
 the collect method to compute the current hit's score. If your collector may request the score
 for a single hit multiple times, you should use <a href="ScoreCachingWrappingScorer.html" title="class in org.apache.lucene.search"><code>ScoreCachingWrappingScorer</code></a>.

 <p><b>NOTE:</b> The doc that is passed to the collect method is relative to the current reader.
 If your collector needs to resolve this to the docID space of the Multi*Reader, you must re-base
 it by recording the docBase from the most recent setNextReader call. Here's a simple example
 showing how to collect docIDs into a BitSet:

 <pre class="prettyprint">
 IndexSearcher searcher = new IndexSearcher(indexReader);
 final BitSet bits = new BitSet(indexReader.maxDoc());
 searcher.search(query, new Collector() {

   public LeafCollector getLeafCollector(LeafReaderContext context)
       throws IOException {
     final int docBase = context.docBase;
     return new LeafCollector() {

       <em>// ignore scorer</em>
       public void setScorer(Scorer scorer) throws IOException {
       }

       public void collect(int doc) throws IOException {
         bits.set(docBase + doc);
       }

     };
   }

 });
 </pre>

 <p>Not all collectors will need to rebase the docID. For example, a collector that simply counts
 the total number of hits would skip it.</div>
<dl>
<dt><span class="simpleTagLabel">WARNING: This API is experimental and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#collect(int)">collect</a></span>&#8203;(int&nbsp;doc)</code></th>
<td class="colLast">
<div class="block">Called once for every document matching a query, with the unbased document number.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#collect(org.apache.lucene.search.DocIdStream)">collect</a></span>&#8203;(<a href="DocIdStream.html" title="class in org.apache.lucene.search">DocIdStream</a>&nbsp;stream)</code></th>
<td class="colLast">
<div class="block">Bulk-collect doc IDs.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>default <a href="DocIdSetIterator.html" title="class in org.apache.lucene.search">DocIdSetIterator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#competitiveIterator()">competitiveIterator</a></span>()</code></th>
<td class="colLast">
<div class="block">Optionally returns an iterator over competitive documents.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finish()">finish</a></span>()</code></th>
<td class="colLast">
<div class="block">Hook that gets called once the leaf that is associated with this collector has finished
 collecting successfully, including when a <a href="CollectionTerminatedException.html" title="class in org.apache.lucene.search"><code>CollectionTerminatedException</code></a> is thrown.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setScorer(org.apache.lucene.search.Scorable)">setScorer</a></span>&#8203;(<a href="Scorable.html" title="class in org.apache.lucene.search">Scorable</a>&nbsp;scorer)</code></th>
<td class="colLast">
<div class="block">Called before successive calls to <a href="#collect(int)"><code>collect(int)</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setScorer(org.apache.lucene.search.Scorable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setScorer</h4>
<pre class="methodSignature">void&nbsp;setScorer&#8203;(<a href="Scorable.html" title="class in org.apache.lucene.search">Scorable</a>&nbsp;scorer)
        throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Called before successive calls to <a href="#collect(int)"><code>collect(int)</code></a>. Implementations that need the score of
 the current document (passed-in to <a href="#collect(int)"><code>collect(int)</code></a>), should save the passed-in Scorer and
 call scorer.score() when needed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="collect(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>collect</h4>
<pre class="methodSignature">void&nbsp;collect&#8203;(int&nbsp;doc)
      throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Called once for every document matching a query, with the unbased document number.

 <p>Note: The collection of the current segment can be terminated by throwing a <a href="CollectionTerminatedException.html" title="class in org.apache.lucene.search"><code>CollectionTerminatedException</code></a>. In this case, the last docs of the current <a href="../index/LeafReaderContext.html" title="class in org.apache.lucene.index"><code>LeafReaderContext</code></a> will be skipped and <a href="IndexSearcher.html" title="class in org.apache.lucene.search"><code>IndexSearcher</code></a> will
 swallow the exception and continue collection with the next leaf.

 <p>Note: This is called in an inner search loop. For good search performance, implementations
 of this method should not call <a href="../index/StoredFields.html#document(int)"><code>StoredFields.document(int)</code></a> on every hit. Doing so can slow
 searches by an order of magnitude or more.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="collect(org.apache.lucene.search.DocIdStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>collect</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;collect&#8203;(<a href="DocIdStream.html" title="class in org.apache.lucene.search">DocIdStream</a>&nbsp;stream)
              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Bulk-collect doc IDs.

 <p>Note: The provided <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a> may be reused across calls and should be consumed
 immediately.

 <p>Note: The provided <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a> typically only holds a small subset of query matches.
 This method may be called multiple times per segment.

 <p>Like <a href="#collect(int)"><code>collect(int)</code></a>, it is guaranteed that doc IDs get collected in order, ie. doc
 IDs are collected in order within a <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a>, and if called twice, all doc IDs from
 the second <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a> will be greater than all doc IDs from the first <a href="DocIdStream.html" title="class in org.apache.lucene.search"><code>DocIdStream</code></a>.

 <p>It is legal for callers to mix calls to <a href="#collect(org.apache.lucene.search.DocIdStream)"><code>collect(DocIdStream)</code></a> and <a href="#collect(int)"><code>collect(int)</code></a>.

 <p>The default implementation calls <code>stream.forEach(this::collect)</code>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="competitiveIterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>competitiveIterator</h4>
<pre class="methodSignature">default&nbsp;<a href="DocIdSetIterator.html" title="class in org.apache.lucene.search">DocIdSetIterator</a>&nbsp;competitiveIterator()
                                      throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Optionally returns an iterator over competitive documents.

 <p>Collectors should delegate this method to their comparators if their comparators provide the
 skipping functionality over non-competitive docs.

 <p>The default is to return <code>null</code> which is interpreted as the collector provide any
 competitive iterator.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="finish()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finish</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;finish()
             throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Hook that gets called once the leaf that is associated with this collector has finished
 collecting successfully, including when a <a href="CollectionTerminatedException.html" title="class in org.apache.lucene.search"><code>CollectionTerminatedException</code></a> is thrown. This
 is typically useful to compile data that has been collected on this leaf, e.g. to convert facet
 counts on leaf ordinals to facet counts on global ordinals. The default implementation does
 nothing.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LeafCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><i>Copyright &copy; 2000-2023 Apache Software Foundation. All Rights Reserved.</i></small></p>
</footer>
</body>
</html>
